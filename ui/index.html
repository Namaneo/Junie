<!DOCTYPE html>
<html lang="en-US">
	<head>
		<title>Junie</title>

		<meta charset="utf-8">
		<meta name="color-scheme" content="light dark">
		<meta name="viewport" content="viewport-fit=cover, width=device-width">
		<meta name="description" content="Web-based retro emulator">

		<link rel="manifest" href="manifest.json">
		<link rel="icon" href="assets/icons/favicon.png">
		<link rel="apple-touch-icon" href="assets/icons/icon-apple.png">

		<meta name="theme-color" content="#000000">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

        <style>
            @media (prefers-color-scheme: dark) {
                body { background-color: #1e2023; }
            }

            @media (prefers-color-scheme: light) {
                body { background-color: #808289; }
            }
        </style>
	</head>
    <body>
        <div id="root"></div>

		<script>
			window.junie_build = null;

			const registerServiceWorker = async () => {
				if (!navigator.serviceWorker)
					return;

				try {
					const origin = location.origin + location.pathname.replace(/\/$/, '');
					const registration = await navigator.serviceWorker.register(`${origin}/service-worker.js`);

					registration.update();
				} catch (error) {
					console.error(`Registration failed with ${error}`);
				}
			};

			if (location.hostname != 'localhost')
				registerServiceWorker();
		</script>

        <script>
            const source = null;

            const script = document.createElement('script');
			script.type = 'module';
            script.src = URL.createObjectURL(new Blob([atob(source)], { type: 'text/javascript'}));
            document.body.appendChild(script);

            document.currentScript.remove();
        </script>
    </body>
</html>
